<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="AHCBUS408 Budget Master - A comprehensive training tool for agricultural budget management from RIST">
    <meta name="keywords" content="farm budget, agricultural budgeting, RIST, budget management, AHCBUS408">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="RIST - AHCBUS408 Budget Master">
    <meta property="og:description" content="Master agricultural budgeting with our interactive training tools">
    <meta property="og:image" content="images/RIST - Primary Colour.jpg">
    <meta property="og:type" content="website">
    
    <title>RIST - AHCBUS408 Budget Master</title>
    
    <!-- Preload critical assets -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="images/RIST Brandmark - Navy Circle.png" type="image/png">
    
    <!-- Preconnect to Firebase -->
    <link rel="preconnect" href="https://www.gstatic.com">
    <script type="module">
        import { initAuth, redirectIfLoggedIn } from './js/auth.js';
        
        // Initialize authentication
        initAuth();
        
        // If user is already logged in, redirect to their dashboard
        document.addEventListener('DOMContentLoaded', async () => {
          await redirectIfLoggedIn();
        });
      </script>
</head>
<body>
    <a href="#main-content" class="skip-link visually-hidden">Skip to main content</a>
    
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-container">
                    <img src="images/RIST - Primary Colour.jpg" alt="RIST - Rural Industries Skill Training" class="rist-logo">
                </div>
                <div class="title-container">
                    <h1>AHCBUS408 Budget Master</h1>
                    <p>Agricultural Budgeting Training Tool</p>
                </div>
                <div id="user-status" class="user-status">
                    <!-- Login status will be shown here -->
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li class="auth-required" style="display:none;"><a href="budget.html">Budget Simulator</a></li>
            <li class="auth-required" style="display:none;"><a href="farm-budget-assessment.html">Assessment</a></li>
            
            <!-- Student-specific navigation -->
            <li class="student-only" style="display:none;"><a href="student-dashboard.html">My Dashboard</a></li>
            <li class="student-only" style="display:none;"><a href="my-assessments.html">My Assessments</a></li>
            
            <!-- Trainer-specific navigation -->
            <li class="trainer-only" style="display:none;"><a href="trainer-dashboard.html">Trainer Dashboard</a></li>
            <li class="trainer-only" style="display:none;"><a href="review-assessments.html">Review Assessments</a></li>
            
            <!-- Authentication links -->
            <li id="login-nav-item"><a href="login.html">Login</a></li>
            <li id="logout-nav-item" style="display:none;"><a href="#" id="logout-link">Logout</a></li>
          </ul>
          <div id="user-status" class="user-status"></div>
        </div>
      </nav>

    <main id="main-content" class="container">
        <section class="hero">
            <h2>Master Farm Budget Management</h2>
            <p>Welcome to AHCBUS408 Budget Master, your comprehensive training tool for agricultural budget management.</p>
            <div class="cta-buttons">
                <a href="budget.html" class="btn btn-primary pulse-animation">Try Budget Simulator</a>
                <a href="login.html" id="login-cta" class="btn btn-secondary">Login to Access Assessments</a>
                <a href="#" id="dashboard-cta" style="display:none;" class="btn btn-secondary">Go to Dashboard</a>
            </div>
        </section>

        <section class="features">
            <div class="feature-card">
                <div class="feature-icon">üí∞</div>
                <h3>Budget Simulator</h3>
                <p>Practice creating and managing farm budgets with our interactive simulator that provides real-time feedback.</p>
                <ul class="feature-list">
                    <li>Create monthly or quarterly budgets</li>
                    <li>Track income and expenses</li>
                    <li>Analyze financial performance</li>
                </ul>
                <a href="budget.html" class="btn btn-secondary">Open Simulator</a>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üìù</div>
                <h3>Budget Assessment</h3>
                <p>Test your knowledge and skills with a practical assessment that simulates a real-world farm budget scenario.</p>
                <ul class="feature-list">
                    <li>Create a farm budget from scratch</li>
                    <li>Track actual performance</li>
                    <li>Analyze variances and make recommendations</li>
                </ul>
                <a href="farm-budget-assessment.html" class="btn btn-secondary">Take Assessment</a>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h3>Performance Tracking</h3>
                <p>Monitor your progress and track your assessment results through your personalized dashboard.</p>
                <ul class="feature-list">
                    <li>View your submitted assessments</li>
                    <li>Track your grades and feedback</li>
                    <li>Access your saved budgets</li>
                </ul>
                <a href="#" id="dashboard-feature-link" class="btn btn-secondary">View Dashboard</a>
            </div>
        </section>

        <section class="course-info">
            <div class="course-header">
                <h2>About This Course</h2>
                <div class="course-badge">AHCBUS408</div>
            </div>
            
            <p class="course-intro">AHCBUS408 - Operate within a budget framework is designed to provide you with the skills and knowledge to effectively manage agricultural budgets.</p>
            
            <div class="course-grid">
                <div class="course-content">
                    <h3>What You'll Learn</h3>
                    <ul class="check-list">
                        <li>Understanding budget structures and terminology</li>
                        <li>Monitoring income and expenditure</li>
                        <li>Identifying and reporting variances</li>
                        <li>Recording and reporting budget performance</li>
                        <li>Making recommendations for improving budget performance</li>
                    </ul>
                </div>
                
                <div class="course-outcomes">
                    <h3>Learning Outcomes</h3>
                    <p>By the end of this course, you'll be able to:</p>
                    <ul class="outcome-list">
                        <li>Create comprehensive farm budgets</li>
                        <li>Monitor actual performance against budgets</li>
                        <li>Analyze variances and identify their causes</li>
                        <li>Make informed recommendations for budget improvements</li>
                        <li>Confidently operate within a budget framework in an agricultural context</li>
                    </ul>
                </div>
            </div>
            
            <div class="course-cta">
                <p>Ready to enhance your agricultural budget management skills?</p>
                <a href="register.html" class="btn">Register Now</a>
            </div>
        </section>
        
        <section class="testimonials">
            <h2>What Our Students Say</h2>
            <div class="testimonial-grid">
                <div class="testimonial-card">
                    <div class="testimonial-quote">"This budget simulator helped me understand how to properly manage my farm's finances. The practical approach made learning easy."</div>
                    <div class="testimonial-author">- James Wilson, Dairy Farmer</div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-quote">"The assessment scenarios are realistic and challenging. I feel much more confident in my budgeting skills now."</div>
                    <div class="testimonial-author">- Sarah Thompson, Agricultural Student</div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-quote">"As a trainer, I find this platform incredibly useful for teaching budget management concepts to my students."</div>
                    <div class="testimonial-author">- Dr. Michael Brown, Agricultural Educator</div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="images/RIST Brandmark - Navy Circle.png" alt="RIST" class="rist-logo-footer">
                </div>
                <div class="footer-info">
                    <p>&copy; 2025 RIST - Rural Industries Skill Training</p>
                    <p>AHCBUS408 Budget Master</p>
                </div>
                <div class="footer-contact">
                    <p>Contact: <a href="mailto:info@rist.com.au">info@rist.com.au</a></p>
                    <div class="footer-links">
                        <a href="#">Privacy Policy</a> | 
                        <a href="#">Terms of Use</a> | 
                        <a href="#">Accessibility</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script type="module">
        import { auth, onAuthStateChanged, signOut } from './js/firebase-config.js';
        
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            const storedUser = localStorage.getItem('currentUser');
            if (storedUser) {
                // Get role
                const storedRole = localStorage.getItem('userRole');
                
                // Update login status
                const userStatusElement = document.getElementById('user-status');
                if (userStatusElement) {
                    userStatusElement.innerHTML = 'Logged in as: ' + JSON.parse(storedUser).email;
                }
                
                // Update navigation
                const loginNavItem = document.getElementById('login-nav-item');
                const registerNavItem = document.getElementById('register-nav-item');
                
                if (loginNavItem) loginNavItem.style.display = 'none';
                if (registerNavItem) registerNavItem.style.display = 'none';
                
                // Show dashboard and logout links
                const navUl = document.querySelector('nav ul');
                if (navUl) {
                    const dashboardLink = document.createElement('li');
                    dashboardLink.innerHTML = `<a href="${storedRole === 'trainer' ? 'trainer-dashboard.html' : 'student-dashboard.html'}">Dashboard</a>`;
                    
                    const logoutLink = document.createElement('li');
                    logoutLink.id = 'logout-nav-item';
                    logoutLink.innerHTML = `<a href="#" id="logout-link">Logout</a>`;
                    
                    navUl.appendChild(dashboardLink);
                    navUl.appendChild(logoutLink);
                    
                    // Add logout functionality
                    const logoutLinkElement = document.getElementById('logout-link');
                    if (logoutLinkElement) {
                        logoutLinkElement.addEventListener('click', function(e) {
                            e.preventDefault();
                            
                            // Clear localStorage
                            localStorage.removeItem('currentUser');
                            localStorage.removeItem('userRole');
                            
                            // Also sign out from Firebase
                            signOut(auth).then(() => {
                                // Sign-out successful
                                window.location.href = 'login.html';
                            }).catch((error) => {
                                // An error happened
                                console.error("Error signing out:", error);
                                // Still redirect to login
                                window.location.href = 'login.html';
                            });
                        });
                    }
                }
            } else {
                // Check Firebase auth
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        // Store in localStorage for future use
                        localStorage.setItem('currentUser', JSON.stringify({
                            uid: user.uid,
                            email: user.email
                        }));
                        
                        // Refresh the page to update navigation
                        window.location.reload();
                    }
                });
            }
            
            // Initialize feature carousel if it exists
            const slides = document.querySelectorAll('.feature-slide');
            if (slides.length > 0) {
                let currentSlide = 0;
                const totalSlides = slides.length;
                const dots = document.querySelectorAll('.dot');
                
                // Show initial slide
                showSlide(currentSlide);
                
                // Set up automatic slideshow
                setInterval(() => {
                    currentSlide = (currentSlide + 1) % totalSlides;
                    showSlide(currentSlide);
                }, 5000);
                
                // Previous button
                const prevButton = document.querySelector('.prev');
                if (prevButton) {
                    prevButton.addEventListener('click', function() {
                        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
                        showSlide(currentSlide);
                    });
                }
                
                // Next button
                const nextButton = document.querySelector('.next');
                if (nextButton) {
                    nextButton.addEventListener('click', function() {
                        currentSlide = (currentSlide + 1) % totalSlides;
                        showSlide(currentSlide);
                    });
                }
                
                // Dot navigation
                dots.forEach((dot, index) => {
                    dot.addEventListener('click', function() {
                        currentSlide = index;
                        showSlide(currentSlide);
                    });
                });
                
                // Show slide function
                function showSlide(index) {
                    slides.forEach((slide, i) => {
                        slide.style.display = i === index ? 'block' : 'none';
                    });
                    
                    dots.forEach((dot, i) => {
                        dot.classList.toggle('active', i === index);
                    });
                }
            }
        });
    </script>
    
    <!-- Add these styles inline for the animations -->
    <style>
        .skip-link {
            position: absolute;
            left: -9999px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        
        .skip-link:focus {
            position: fixed;
            top: 0;
            left: 0;
            width: auto;
            height: auto;
            padding: 10px;
            background: var(--primary-navy);
            color: white;
            z-index: 9999;
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(231, 140, 60, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(231, 140, 60, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(231, 140, 60, 0);
            }
        }
        
        .fade-in {
            animation: fadeIn 1s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out forwards;
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .feature-card {
            opacity: 0;
        }
        
        .feature-list {
            list-style: none;
            padding-left: 0;
            margin-bottom: 20px;
        }
        
        .feature-list li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 8px;
        }
        
        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--primary-orange);
            font-weight: bold;
        }
        
        .check-list {
            list-style: none;
            padding-left: 0;
        }
        
        .check-list li {
            position: relative;
            padding-left: 30px;
            margin-bottom: 12px;
        }
        
        .check-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--success-color);
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .outcome-list {
            list-style: none;
            padding-left: 0;
        }
        
        .outcome-list li {
            position: relative;
            padding-left: 30px;
            margin-bottom: 12px;
        }
        
        .outcome-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--primary-orange);
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .course-badge {
            background-color: var(--primary-orange);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .course-intro {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: var(--primary-navy);
        }
        
        .course-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .course-cta {
            background-color: var(--secondary-taupe);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-top: 30px;
        }
        
        .course-cta p {
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        
        .testimonials {
            margin-top: 50px;
            text-align: center;
        }
        
        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .testimonial-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 25px;
            position: relative;
        }
        
        .testimonial-card:before {
            content: "";
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 60px;
            color: var(--secondary-taupe);
            opacity: 0.5;
            font-family: Georgia, serif;
            line-height: 1;
        }
        
        .testimonial-quote {
            font-style: italic;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .testimonial-author {
            font-weight: bold;
            color: var(--primary-navy);
        }
        
        .footer-links {
            margin-top: 10px;
        }
        
        .footer-links a {
            color: white;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .course-grid {
                grid-template-columns: 1fr;
            }
            
            .testimonial-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>